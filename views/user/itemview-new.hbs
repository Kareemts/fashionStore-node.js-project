<section>
    <div class="container mt-5 mb-5">
        {{#each itemView}}
        <div class="card">
            <div class="row g-0">
                <div class="col-md-6 border-end">
                    <div class="d-flex flex-column justify-content-center">
                        <div class="main_image">
                            <div id="img-zoomer-box">
                                <div class="d-flex justify-content-center"> <img style="height: 400px; width: 350px;"
                                        src="/product-images/{{this.Images.[0]}}" id="main_product_image" width="350" />
                                </div>
                                <div id="img-2" class="imgZoom"
                                    style="background: url(/product-images/{{this.Images.[0]}}) no-repeat #fff;"></div>
                            </div>
                        </div>
                        <div class="thumbnail_images">
                            <ul id="thumbnail">
                                <li>
                                    <img onclick="changeImage(this)" src="/product-images/{{this.Images.[1]}}"
                                        width="70" />
                                </li>
                                <li>
                                    <img onclick="changeImage(this)" src="/product-images/{{this.Images.[2]}}"
                                        width="70" />
                                </li>
                                <li>
                                    <img onclick="changeImage(this)" src="/product-images/{{this.Images.[3]}}"
                                        width="70" />
                                </li>
                                <li>
                                    <img onclick="changeImage(this)" src="/product-images/{{this.Images.[0]}}"
                                        width="70" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="p-3 right-side">
                        <div class="d-flex justify-content-between align-items-center">
                            <h3 class="text-dark font-weight-bold">{{this.NAME}}</h3>
                            <span class="heart"><i class="bx bx-heart"></i></span>
                        </div>
                        <div class="mt-2 pr-3 content">
                            <p>
                                {{this.DISCRIPTION}}
                            </p>
                        </div>
                        <s class="fs-5">MRP: ₹ {{this.MRP}}.00</s><span
                            class="text-danger fs-6 font-weight-bold">{{this.discount}}
                            % off</span>
                        <div class="itemPrice text-dark ">Price:₹{{this.OfferPrice}}</div>
                        <div class="ratings d-flex flex-row align-items-center">
                            <div class="d-flex flex-row">
                                <i class="bx bxs-star"></i> <i class="bx bxs-star"></i>
                                <i class="bx bxs-star"></i> <i class="bx bxs-star"></i>
                                <i class="bx bx-star"></i>
                            </div>
                            <span></span>
                        </div>
                        <div class="mt-5">
                            <span class="fw-bold">Color</span>
                            <div class="colors">
                                <ul id="marker">
                                    <li id="marker-1"></li>
                                    <li id="marker-2"></li>
                                    <li id="marker-3"></li>
                                    <li id="marker-4"></li>
                                    <li id="marker-5"></li>
                                </ul>
                            </div>
                        </div>
                        <div class="buttons d-flex flex-row mt-5 gap-3">
                            {{!-- <button class="btn btn-outline-dark">Buy Now</button> --}}
                            <button onclick="addToCart('{{this._id}}')" class="btn btn-dark">Add to Cart</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
</section>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" />
<style>
    {
            {
             !-- for zoom --
        }
    }

    #img-zoomer-box {
        width: 500px;
        height: auto;
        position: relative;
        margin-top: 10px;
    }

    #img-zoomer-box {
        width: 100%;
        height: auto;
    }

    #img-zoomer-box:hover,
    #img-zoomer-box:active {
        cursor: zoom-in;
        display: block;
    }

    #img-zoomer-box:hover #img-2,
    #img-zoomer-box:active #img-2 {
        opacity: 1;
    }

    #img-2 {
        width: 340px;
        height: 340px;
        box-shadow: 0 5px 10px -2px rgba(0, 0, 0, 0.3);
        pointer-events: none;
        position: absolute;
        opacity: 0;
        border: 4px solid whitesmoke;
        z-index: 99;
        border-radius: 100%;
        display: block;
        transition: opacity 0.2s;
    }



        {
            {
             !-- item view --
        }
    }

    body {
        background-color: #ecedee;
    }

    .card {
        border: none;
        overflow: hidden;
    }

    .thumbnail_images ul {
        list-style: none;
        justify-content: center;
        display: flex;
        align-items: center;
        margin-top: 10px;
    }

    .thumbnail_images ul li {
        margin: 5px;
        padding: 10px;
        border: 2px solid #eee;
        cursor: pointer;
        transition: all 0.5s;
    }

    .thumbnail_images ul li:hover {
        border: 2px solid #000;
    }

    .main_image {
        display: flex;
        justify-content: center;
        align-items: center;
        border-bottom: 1px solid #eee;
        height: 400px;
        width: 100%;
        overflow: hidden;
    }

    .heart {
        height: 29px;
        width: 29px;
        background-color: #eaeaea;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .content p {
        font-size: 12px;
    }

    .ratings span {
        font-size: 14px;
        margin-left: 12px;
    }

    .colors {
        margin-top: 5px;
    }

    .colors ul {
        list-style: none;
        display: flex;
        padding-left: 0px;
    }

    .colors ul li {
        height: 20px;
        width: 20px;
        display: flex;
        border-radius: 50%;
        margin-right: 10px;
        cursor: pointer;
    }

    .colors ul li:nth-child(1) {
        background-color: #6c704d;
    }

    .colors ul li:nth-child(2) {
        background-color: #96918b;
    }

    .colors ul li:nth-child(3) {
        background-color: #68778e;
    }

    .colors ul li:nth-child(4) {
        background-color: #263f55;
    }

    .colors ul li:nth-child(5) {
        background-color: black;
    }

    .right-side {
        position: relative;
    }

    .search-option {
        position: absolute;
        background-color: #000;
        overflow: hidden;
        align-items: center;
        color: #fff;
        width: 200px;
        height: 200px;
        border-radius: 49% 51% 50% 50% / 68% 69% 31% 32%;
        left: 30%;
        bottom: -250px;
        transition: all 0.5s;
        cursor: pointer;
    }

    .search-option .first-search {
        position: absolute;
        top: 20px;
        left: 90px;
        font-size: 20px;
        opacity: 1000;
    }

    .search-option .inputs {
        opacity: 0;
        transition: all 0.5s ease;
        transition-delay: 0.5s;
        position: relative;
    }

    .search-option .inputs input {
        position: absolute;
        top: 200px;
        left: 30px;
        padding-left: 20px;
        background-color: transparent;
        width: 300px;
        border: none;
        color: #fff;
        border-bottom: 1px solid #eee;
        transition: all 0.5s;
        z-index: 10;
    }

    .search-option .inputs input:focus {
        box-shadow: none;
        outline: none;
        z-index: 10;
    }

    .search-option:hover {
        border-radius: 0px;
        width: 100%;
        left: 0px;
    }

    .search-option:hover .inputs {
        opacity: 1;
    }

    .search-option:hover .first-search {
        left: 27px;
        top: 25px;
        font-size: 15px;
    }

    .search-option:hover .inputs input {
        top: 20px;
    }

    .search-option .share {
        position: absolute;
        right: 20px;
        top: 22px;
    }

    .buttons .btn {
        height: 50px;
        width: 150px;
        border-radius: 0px !important;
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"></script>
<script>

    //for zoom
    let zoomer = (function () {
        document.querySelector('#img-zoomer-box').addEventListener(
            'mousemove',
            function (e) {
                let original = document.querySelector('#img-zoomer-box'),
                    magnified = document.querySelector('#img-2'),
                    style = magnified.style,
                    x = e.pageX - this.offsetLeft,
                    y = e.pageY - this.offsetTop,
                    imgWidth = original.offsetWidth,
                    imgHeight = original.offsetHeight,
                    xperc = (x / imgWidth) * 100,
                    yperc = (y / imgHeight) * 100;

                //lets user scroll past right edge of image
                if (x > 0.01 * imgWidth) {
                    xperc += 0.15 * xperc;
                }

                //lets user scroll past bottom edge of image
                if (y >= 0.01 * imgHeight) {
                    yperc += 0.15 * yperc;
                }

                style.backgroundPositionX = xperc - 9 + '%';
                style.backgroundPositionY = yperc - 9 + '%';

                style.left = x - 180 + 'px';
                style.top = y - 180 + 'px';
            },
            false
        );
    })();


    function changeImage(element) {
        var main_prodcut_image = document.getElementById('main_product_image');
        main_prodcut_image.src = element.src;
        console.log( element.src)
        document.getElementById("img-2").style.backgroundImage = "url(" + element.src + ")";


    }


</script>